<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>SPSC Lite in JavaScript</title>
<script src='sll_lang.js' />
<script src='parsers.js' />
<script src='sll_parser.js' />
<script src='sll_algebra.js' />
<script src='partial_process_tree.js' />
<script src='residuator.js' />
<script src='he.js' />
<script src='msg.js' />
<script src='spsc.js' /> 
</head>
<body>
<script type="text/javascript">
function supercompile() {
	var src_code = document.getElementById('code').value;
	var src_goal = document.getElementById('goal').value;

	//console.log(src_code);
	
	var program = sll_parser.parse(src_code).result;
	var goal = sll_parser.parse_exp(src_goal);
	var sc = supercompiler(program);
	var tree = sc.build_tree(goal);

	var result = residuator(tree).residuate();
	
	//console.log('sc result:');
	document.getElementById('residual_goal').value = result[0].toString();
	document.getElementById('residual_code').value = result[1].toString();
}
</script>
<div>
<textarea rows="10" cols="80" id='code'></textarea>
<br />
<input type="text" id='goal' />
<br />
<button onclick="supercompile();">Supercompile</button>
<br />
<textarea rows="10" cols="80" id='residual_code'>
</textarea>
<br />
<input type="text" id='residual_goal' />
</div>
</body>
</html>